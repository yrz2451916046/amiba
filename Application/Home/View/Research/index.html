<extend name="Index/index" />
<block name="headlist">
    <style>
        .research {
            width: 100%;
            margin-top: 140px;
            _margin-bottom: 40px;
            _height: 930px;
            _background: rgb(230, 230, 230);
        }
        
        .research-safe {
            width: 1000px;
            margin: 0 auto;
            _height: 840px;
            _background: #fff;
            margin-top: 40px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, .1);
            _box-shadow: 10px 10px 5px #888888;
        }
        
        .news>a {
            display: block;
            float: left;
            width: 300px;
            height: 340px;
            background: #fff;
            box-shadow: 0 5px 10px rgba(0, 0, 0, .1);
            border: 1px solid #999;
            margin-top: 30px!important;
            margin: 0 15.66px;
        }
        
        .news>a:hover {
            display: block;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.5);
            transition: box-shadow 0.5s;
        }
        
        .news>a>h2 {
            display: block;
            color: #333;
            font-size: 18px;
            height: 32px;
            line-height: 32px;
            _text-align: center;
            padding: 2px;
            padding-left: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 400;
            margin-top: 5px;
            width: 80%;
        }
        
        .news>a>p {
            display: block;
            color: #666;
            font-size: 14px;
            width: 280px;
            margin: 0 auto;
            height: 80px;
            line-height: 26px;
            text-align: justify;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            overflow: hidden;
            text-indent: 28px;
        }
        /* .research-safe-high {
            float: left;
            background: #fff;
            height: 838px;
            overflow: hidden;
            position: relative;
        } */
        
        .research-img:hover {
            transform: scale(1.1);
        }
    </style>
</block>
<block name="main">
    <div class="research">
        <div class="research-safe">
            <span style="margin:3px 0;display:block;width:100%;height:50px;float:left;line-height:50px;color:#F2C80F;font-size:24px;background:#fff;border-top:2px solid #F2C80F;">
                    <img src="__PUBLIC__/Upload/2017-09-22/news_hot_fill.png" style="width:26px;height:26px;margin:12px;float:left;">新闻资讯&nbsp;/&nbsp;News information
                </span>
            <ul class="news" style="height:744px;width:100%;background:#fff;float:left;padding-bottom:30px;overflow:hidden;">
                <volist name="ambnews" id="vo">
                    <a href="{:U('Research/detail',array('id'=>$id,'aid'=>$vo['id']))}" class="newslist">
                        <div style="width:300px;height:200px;overflow:hidden;">
                            <img src="__PUBLIC__/Upload/{$vo.icon}" alt="" style="width:300px;height:200px;transition: all 0.6s;" class="research-img">
                        </div>
                        <h2>{$vo.title}</h2>
                        <p>{$vo.abstract}</p>
                    </a>
                </volist>
            </ul>
            <p style="width:100%;font-size:16px;color:#fff;background:#F2C80F;line-height:40px;height:40px;text-align:center;float:left;">
                <b class="append-button" style="cursor:pointer;font-weight:400;">查看更多>></b>
            </p>
        </div>
    </div>
    <script>
        $(function() {
            var windex = $(".newslist").length;
            var colHeight = Math.ceil(windex / 3);
            // console.log(colHeight)
            $(".append-button").click(function() {
                var researchHeight = $(".news").height();
                var sigHeight = 372;
                $(".news").css({
                    "max-height": colHeight * 372,
                    "height": researchHeight + sigHeight
                })
                var newsSafe = $(".news").css("max-height");
                var newsnowHeight = $(".news").css("height");
                if (newsnowHeight == newsSafe) {
                    $(".append-button").text("已经没有更多了~")
                }
            })
        })
    </script>
</block>